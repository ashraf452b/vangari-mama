{% extends "base.html" %}

{% block title %}My Dashboard - Vangari Mama{% endblock %}

{% block content %}
<div class="container">
    <div class="dashboard-header">
        <h1>Dashboard</h1>
        <p>Welcome back, {{ current_user.username }}! Here's an overview of your activity.</p>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <i class="fas fa-weight-hanging"></i>
            <div class="stat-info">
                <h4>Total Sold</h4>
                <p>{{ "%.2f"|format(total_kg_sold) }} Kg</p>
            </div>
        </div>
        <div class="stat-card">
            <i class="fas fa-hand-holding-usd"></i>
            <div class="stat-info">
                <h4>Total Earnings</h4>
                <p>à§³ {{ "%.2f"|format(total_earnings) }}</p>
            </div>
        </div>
    </div>

    <div class="dashboard-grid">
        <div class="profile-card">
            <h3 class="card-title">My Profile</h3>
            <div class="profile-info">
                <p><i class="fas fa-user fa-fw"></i> {{ current_user.username }}</p>
                <p><i class="fas fa-envelope fa-fw"></i> {{ current_user.email }}</p>
                <p><i class="fas fa-tag fa-fw"></i> {{ current_user.user_type.title() }}</p>
            </div>
        </div>
        <div class="posts-list">
            <div class="posts-list-header">
                <h3 class="card-title">My Posts</h3>
                <a href="{{ url_for('create_post') }}" class="create-post-btn">
                    <i class="fas fa-plus"></i> Create Post
                </a>
            </div>
            
            {% if user_posts %}
                {% for post in user_posts %}
                <div class="post-item">
                    <span class="post-details">{{ post.trash_type.title() }}</span>
                    
                    {% if post.status.lower() == 'pending' %}
                        <span class="status-badge status-pending">Pending</span>
                    {% elif post.status.lower() == 'completed' %}
                        <span class="status-badge status-completed">Completed</span>
                    {% else %}
                        <span class="status-badge">{{ post.status.title() }}</span>
                    {% endif %}
                </div>
                {% endfor %}
            {% else %}
                <div class="no-posts-message">
                    <p>You have not created any posts yet.</p>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}